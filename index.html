<html>
<head>
<title>Ed/Juke</title>
</head>
<body>

<h1>Ed/Juke</h1>
<p>There are <span id="connectedUsers">0</span> users connected.</p>

<h2>Now Playing:</h2>
<h3><span id="npArtist">artist</span></h3>
<h3><span id="npTrack">track</span></h3>

<p><span id="npCurTime">0:00</span> / <span id="npTime">0:00</span></p> 

<p>Votes: <span id="npVotes">0</span> (<span id="npVotesNeeded">0</span> needed)</p>

<h2>Commands</h2>
<a href="javascript:;" onclick="voteNext();">next</a>


<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect(window.location.href);

  socket.on('nowplaying', function (data) {
    document.getElementById('npArtist').innerHTML = data.artist;
    document.getElementById('npTrack').innerHTML = data.track;
    document.getElementById('npCurTime').innerHTML = data.curtime;
    document.getElementById('npTime').innerHTML = data.tracktime;
    document.getElementById('npVotes').innerHTML = data.votes;
    document.getElementById('npVotesNeeded').innerHTML = Math.ceil(data.users / 2);
    document.getElementById('connectedUsers').innerHTML = data.users;
  });

  function voteNext()
  {
    socket.emit('votenext');
  }
</script>
</body>
</html>
